<div data-controller="mapbox" data-api-key="<%= ENV["MAPBOX_API_KEY"]%>" >
  <div data-mapbox-target="searchBox" class="hidden">
    <div data-controller="modal" class="modal-background" data-modal-target="background">
      <div class="modal modal--with-header-and-footer">
        <nav class="modal-header">
          <%= button_tag data: {
            modal_target: 'closeButton',
            action: "click->mapbox#toggleSearchBox"
          }, class: "hover:underline p-4 -mt-4 -ml-4 inline-flex content-center items-center" do %>
            <%= inline_svg_tag 'x', class: 'inline-block' %>
            Lukk
          <% end %>
          <h2 class="font-bold text-center">
            <%= t('space_filter.edit_filter') %>
          </h2>
        </nav>
        <section class="modal-content">
          <%= render partial: "spaces/index/search_form" %>
        </section>
        <nav class="modal-footer">
          <%= button_tag data: {
            modal_target: 'closeButton',
            action: "click->mapbox#toggleSearchBox"
          }, class: "bg-gray-900 hover:bg-lnu-pink text-white rounded-lg px-4 py-3 inline-flex gap-2 content-center items-center" do %>
            <%= inline_svg_tag 'search', class: 'inline-block' %>
            <%= t('space_filter.show_spaces', count: '') %>
          <% end %>
        </nav>
      </div>
    </div>
  </div>
  <div class="md:grid grid-cols-2">
    <div class="relative">
      <link href="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css" rel="stylesheet">
      <div class="w-full h-96 md:h-screen" id="map-frame">
      </div>
      <nav class="fixed md:absolute m-4 z-50 top-0 right-0 left-0 flex justify-center">
      <button
        data-action="click->mapbox#toggleSearchBox"
        class="border-white w-64 border-2 hover:border-lnu-pink py-3 px-4 bg-white rounded-full shadow-xl flex justify-between">
        <span class="inline-flex items-center justify-start">
          <%= inline_svg_tag 'search', class: 'inline-block' %>
        </span>
        <span class="inline-flex items-center justify-center" id="searchbox-text">
          <%= t('space_filter.search_and_filter') %>
        </span>
        <span class="inline-flex items-center justify-end gap-2">
          <span id="searchbox-count"></span>
          <%= inline_svg_tag 'filter', class: 'inline-block' %>
        </span>

      </button>
      </nav>
    </div>
    <div class="md:h-screen overflow-auto pt-4 px-4 static">
      <div class="flex">
        <h1 class="text-2xl mt-1"><%= Space.model_name.human(count: 2) %></h1>
        <%= link_to new_space_path, class: 'ml-2 unstyled-link edit-button collapsable' do %>
          <span class="text">
            <%= t('space_listing.new_space') %>
          </span>
          <%= inline_svg_tag 'plus', alt: t('space_listing.new_space'), title: t('space_listing.new_space'), class: "w-4 h-4" %>
        <% end %>
      </div>
      <div id="space-listing">
      </div>
    </div>
  </div>
</div>
