<div data-controller="mapbox" data-api-key="<%= ENV["MAPBOX_API_KEY"]%>" >
  <div data-mapbox-target="searchBox" class="hidden">
    <div class="fixed z-50 insert-0 overflow-hidden bg-white h-screen">
    <%= render partial: "spaces/index/search_form" %>
    <button
      data-action="click->mapbox#toggleSearchBox"
      class="absolute w-6 h-6 m-2 top-0 right-0 bg-lnu-pink text-white">X</button>
    </div>
  </div>
  <div class="md:grid grid-cols-2">
    <div class="relative">
      <link href="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css" rel="stylesheet">
      <div class="w-full h-96 md:h-screen" id="map-frame">
      </div>
      <button
        data-action="click->mapbox#toggleSearchBox"
        class="absolute m-2 top-0 right-0 bg-lnu-pink p-2 text-white">Filter</button>
    </div>
    <div class="md:h-screen overflow-auto pt-4 px-4 static">
      <h1 class="text-2xl"><%= Space.model_name.human(count: 2) %></h1>
      <details class="p-4 cursor-pointer border-4 border-green-400 bg-green-50">
        <summary class="text-green-600 font-bold">Create new space</summary>
        <%= render partial: "spaces/create/form", locals: { space: @space } %>
      </details>

      <div id="space-listing">
      </div>
    </div>
  </div>
</div>
